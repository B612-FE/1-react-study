{"ast":null,"code":"import _slicedToArray from\"/Users/eunjung/Desktop/EMOTION DIARY/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/eunjung/Desktop/EMOTION DIARY/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/eunjung/Desktop/EMOTION DIARY/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect,useReducer,useRef}from\"react\";import\"./App.css\";import{BrowserRouter,Route,Routes}from\"react-router-dom\";import Home from\"./pages/Home\";import New from\"./pages/New\";import Edit from\"./pages/Edit\";import Diary from\"./pages/Diary\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){var newState=[];switch(action.type){case\"INIT\":{return action.data;}case\"CREATE\":{newState=[action.data].concat(_toConsumableArray(state));break;}case\"REMOVE\":{newState=state.filter(function(it){return it.id!==action.targetId;});break;}case\"EDIT\":{newState=state.map(function(it){return it.id===action.data.id?_objectSpread({},action.data):it;});break;}default:return state;}localStorage.setItem(\"diary\",JSON.stringify(newState));return newState;};export var DiaryStateContext=/*#__PURE__*/React.createContext();export var DiaryDispatchContext=/*#__PURE__*/React.createContext();function App(){var _useReducer=useReducer(reducer,[]),_useReducer2=_slicedToArray(_useReducer,2),data=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){var localData=localStorage.getItem(\"diary\");if(localData){var diaryList=JSON.parse(localData).sort(function(a,b){return parseInt(b.id)-parseInt(a.id);});dataId.current=parseInt(diaryList[0].id)+1;dispatch({type:\"INIT\",data:diaryList});}},[]);console.log(new Date().getTime());var dataId=useRef(6);var onCreate=function onCreate(date,content,emotion){dispatch({type:\"CREATE\",data:{id:dataId.current,date:new Date(date).getTime(),content:content,emotion:emotion}});dataId.current+=1;};var onRemove=function onRemove(targetId){dispatch({type:\"REMOVE\",targetId:targetId});};var onEdit=function onEdit(targetId,date,content,emotion){dispatch({type:\"EDIT\",data:{id:targetId,date:new Date(date).getTime(),content:content,emotion:emotion}});};return/*#__PURE__*/_jsx(DiaryStateContext.Provider,{value:data,children:/*#__PURE__*/_jsx(DiaryDispatchContext.Provider,{value:{onCreate:onCreate,onEdit:onEdit,onRemove:onRemove},children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/new\",element:/*#__PURE__*/_jsx(New,{})}),/*#__PURE__*/_jsx(Route,{path:\"/edit/:id\",element:/*#__PURE__*/_jsx(Edit,{})}),/*#__PURE__*/_jsx(Route,{path:\"/diary/:id\",element:/*#__PURE__*/_jsx(Diary,{})})]})})})})});}export default App;","map":{"version":3,"names":["React","useEffect","useReducer","useRef","BrowserRouter","Route","Routes","Home","New","Edit","Diary","jsx","_jsx","jsxs","_jsxs","reducer","state","action","newState","type","data","concat","_toConsumableArray","filter","it","id","targetId","map","_objectSpread","localStorage","setItem","JSON","stringify","DiaryStateContext","createContext","DiaryDispatchContext","App","_useReducer","_useReducer2","_slicedToArray","dispatch","localData","getItem","diaryList","parse","sort","a","b","parseInt","dataId","current","console","log","Date","getTime","onCreate","date","content","emotion","onRemove","onEdit","Provider","value","children","className","path","element"],"sources":["/Users/eunjung/Desktop/EMOTION DIARY/src/App.js"],"sourcesContent":["import React, { useEffect, useReducer, useRef } from \"react\";\n\nimport \"./App.css\";\nimport { BrowserRouter, Route, Routes } from \"react-router-dom\";\n\nimport Home from \"./pages/Home\";\nimport New from \"./pages/New\";\nimport Edit from \"./pages/Edit\";\nimport Diary from \"./pages/Diary\";\n\nconst reducer = (state, action) => {\n  let newState = [];\n  switch (action.type) {\n    case \"INIT\": {\n      return action.data;\n    }\n    case \"CREATE\": {\n      newState = [action.data, ...state];\n      break;\n    }\n    case \"REMOVE\": {\n      newState = state.filter((it) => it.id !== action.targetId);\n      break;\n    }\n    case \"EDIT\": {\n      newState = state.map((it) =>\n        it.id === action.data.id ? { ...action.data } : it\n      );\n      break;\n    }\n    default:\n      return state;\n  }\n\n  localStorage.setItem(\"diary\", JSON.stringify(newState));\n  return newState;\n};\n\nexport const DiaryStateContext = React.createContext();\nexport const DiaryDispatchContext = React.createContext();\n\nfunction App() {\n  const [data, dispatch] = useReducer(reducer, []);\n\n  useEffect(() => {\n    const localData = localStorage.getItem(\"diary\");\n    if (localData) {\n      const diaryList = JSON.parse(localData).sort(\n        (a, b) => parseInt(b.id) - parseInt(a.id)\n      );\n      dataId.current = parseInt(diaryList[0].id) + 1;\n\n      dispatch({ type: \"INIT\", data: diaryList });\n    }\n  }, []);\n\n  console.log(new Date().getTime());\n\n  const dataId = useRef(6);\n  const onCreate = (date, content, emotion) => {\n    dispatch({\n      type: \"CREATE\",\n      data: {\n        id: dataId.current,\n        date: new Date(date).getTime(),\n        content,\n        emotion,\n      },\n    });\n    dataId.current += 1;\n  };\n  const onRemove = (targetId) => {\n    dispatch({ type: \"REMOVE\", targetId });\n  };\n  const onEdit = (targetId, date, content, emotion) => {\n    dispatch({\n      type: \"EDIT\",\n      data: {\n        id: targetId,\n        date: new Date(date).getTime(),\n        content,\n        emotion,\n      },\n    });\n  };\n\n  return (\n    <DiaryStateContext.Provider value={data}>\n      <DiaryDispatchContext.Provider\n        value={{\n          onCreate,\n          onEdit,\n          onRemove,\n        }}>\n        <BrowserRouter>\n          <div className=\"App\">\n            <Routes>\n              <Route path=\"/\" element={<Home />} />\n              <Route path=\"/new\" element={<New />} />\n              <Route path=\"/edit/:id\" element={<Edit />} />\n              <Route path=\"/diary/:id\" element={<Diary />} />\n            </Routes>\n          </div>\n        </BrowserRouter>\n      </DiaryDispatchContext.Provider>\n    </DiaryStateContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}